 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/web/src/App.tsx b/web/src/App.tsx
index 19662f9e67bc12122e30d04cd2e31774d1c5e39f..0bcbe60d85dbd5737200bee0de574350e456495f 100644
--- a/web/src/App.tsx
+++ b/web/src/App.tsx
@@ -1,42 +1,45 @@
 import React, { useState } from 'react';
 import { Sidebar } from './components/Sidebar';
 import { PosProvider } from './context/PosContext';
 import { ProductsPage } from './pages/ProductsPage';
 import { PosPage } from './pages/PosPage';
 import { DashboardPage } from './pages/DashboardPage';
+import { SalesPage } from './pages/SalesPage';
 
 const views = {
   dashboard: <DashboardPage />,
   pos: <PosPage />,
   products: <ProductsPage />,
+  sales: <SalesPage />,
 };
 
 const titles: Record<string, string> = {
   dashboard: 'Panel general',
   pos: 'Punto de venta',
   products: 'Productos',
+  sales: 'Ventas',
 };
 
 const AppContent: React.FC = () => {
   const [view, setView] = useState<keyof typeof views>('dashboard');
 
   return (
     <div className="h-screen flex bg-cream">
       <Sidebar current={view} onSelect={setView} />
       <main className="flex-1 overflow-y-auto">
         <header className="flex items-center justify-between p-6 sticky top-0 bg-cream/90 backdrop-blur border-b border-cream/80">
           <div>
             <p className="text-xs uppercase text-coffee/60 font-semibold">Hedelmiá POS</p>
             <h1 className="text-2xl font-bold">{titles[view]}</h1>
           </div>
           <div className="px-4 py-2 rounded-lg bg-white shadow-card text-sm">Modo offline / localStorage</div>
         </header>
         <div className="p-6">{views[view]}</div>
       </main>
     </div>
   );
 };
 
 const App: React.FC = () => (
   <PosProvider>
     <AppContent />
diff --git a/web/src/components/Sidebar.tsx b/web/src/components/Sidebar.tsx
index 991a633623ac3209c47c8952125a35d06f8f70dc..534ffb3cd7117a8834997d50ffb96f0963fcc85a 100644
--- a/web/src/components/Sidebar.tsx
+++ b/web/src/components/Sidebar.tsx
@@ -1,32 +1,33 @@
-import { ChartBarIcon, ShoppingCartIcon, CubeIcon } from '@heroicons/react/24/outline';
+import { ChartBarIcon, ShoppingCartIcon, CubeIcon, DocumentTextIcon } from '@heroicons/react/24/outline';
 import React from 'react';
 
 const navItems = [
   { key: 'dashboard', label: 'Dashboard', icon: ChartBarIcon },
   { key: 'pos', label: 'POS', icon: ShoppingCartIcon },
   { key: 'products', label: 'Productos', icon: CubeIcon },
+  { key: 'sales', label: 'Ventas', icon: DocumentTextIcon },
 ] as const;
 
 type SidebarProps = {
   current: string;
   onSelect: (key: string) => void;
 };
 
 export const Sidebar: React.FC<SidebarProps> = ({ current, onSelect }) => {
   return (
     <aside className="bg-white border-r border-cream/80 h-full w-64 flex flex-col p-4 gap-6">
       <div className="flex items-center gap-3 px-2">
         <div className="h-10 w-10 rounded-xl bg-blush flex items-center justify-center font-bold text-coffee shadow-card">
           HP
         </div>
         <div>
           <p className="text-lg font-semibold">Hedelmiá POS</p>
           <p className="text-sm text-coffee/70">Sucursal única</p>
         </div>
       </div>
 
       <nav className="flex-1 flex flex-col gap-2">
         {navItems.map(({ key, label, icon: Icon }) => {
           const active = current === key;
           return (
             <button
diff --git a/web/src/context/PosContext.tsx b/web/src/context/PosContext.tsx
index 6b5b0bc3ec2e35aa7c19e955630f8d3eb1c87589..d6c5f3f6d42d236004b2f4dd877c6082e029a8a0 100644
--- a/web/src/context/PosContext.tsx
+++ b/web/src/context/PosContext.tsx
@@ -25,65 +25,85 @@ export type Sale = {
 type SalePayload = { productId: string; quantity: number }[];
 
 type PosContextValue = {
   products: Product[];
   sales: Sale[];
   addProduct: (product: Omit<Product, 'id'>) => void;
   updateProduct: (id: string, changes: Partial<Omit<Product, 'id'>>) => void;
   deleteProduct: (id: string) => void;
   recordSale: (items: SalePayload) => { success: boolean; message?: string };
 };
 
 const PosContext = createContext<PosContextValue | null>(null);
 const PRODUCTS_KEY = 'hedelmia_products';
 const SALES_KEY = 'hedelmia_sales';
 
 function generateId() {
   return typeof crypto !== 'undefined' && 'randomUUID' in crypto
     ? crypto.randomUUID()
     : Math.random().toString(36).slice(2, 10);
 }
 
 export const PosProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
   const [products, setProducts] = useState<Product[]>(() => loadFromStorage(PRODUCTS_KEY, []));
   const [sales, setSales] = useState<Sale[]>(() => loadFromStorage(SALES_KEY, []));
 
+  useEffect(() => {
+    const syncFromStorage = () => {
+      setProducts(loadFromStorage(PRODUCTS_KEY, []));
+      setSales(loadFromStorage(SALES_KEY, []));
+    };
+
+    syncFromStorage();
+    window.addEventListener('storage', syncFromStorage);
+    return () => window.removeEventListener('storage', syncFromStorage);
+  }, []);
+
   useEffect(() => {
     saveToStorage(PRODUCTS_KEY, products);
   }, [products]);
 
   useEffect(() => {
     saveToStorage(SALES_KEY, sales);
   }, [sales]);
 
   const addProduct = (product: Omit<Product, 'id'>) => {
-    const newProduct: Product = { ...product, id: generateId() };
+    const safeStock = Math.max(0, product.stock);
+    const newProduct: Product = { ...product, stock: safeStock, id: generateId() };
     setProducts((prev) => [...prev, newProduct]);
   };
 
   const updateProduct = (id: string, changes: Partial<Omit<Product, 'id'>>) => {
-    setProducts((prev) => prev.map((product) => (product.id === id ? { ...product, ...changes } : product)));
+    setProducts((prev) =>
+      prev.map((product) => {
+        if (product.id !== id) return product;
+        const nextStock =
+          changes.stock === undefined ? product.stock : Math.max(0, Number.isNaN(changes.stock) ? 0 : changes.stock);
+
+        return { ...product, ...changes, stock: nextStock };
+      }),
+    );
   };
 
   const deleteProduct = (id: string) => {
     setProducts((prev) => prev.filter((product) => product.id !== id));
   };
 
   const recordSale = (items: SalePayload) => {
     if (!items.length) return { success: false, message: 'El carrito está vacío' };
 
     const updatedProducts = [...products];
     const saleItems: SaleItem[] = [];
     let total = 0;
 
     for (const { productId, quantity } of items) {
       const productIndex = updatedProducts.findIndex((p) => p.id === productId);
       if (productIndex === -1) return { success: false, message: 'Producto no encontrado' };
 
       const product = updatedProducts[productIndex];
       if (product.stock < quantity) {
         return { success: false, message: `Stock insuficiente para ${product.name}` };
       }
 
       updatedProducts[productIndex] = { ...product, stock: product.stock - quantity };
       saleItems.push({ productId, name: product.name, price: product.price, quantity });
       total += product.price * quantity;
diff --git a/web/src/pages/ProductsPage.tsx b/web/src/pages/ProductsPage.tsx
index 98c85b51cb862ff8cdf356f06c71afa029f98596..030ad3a6957d79d80590a97a20809a3ee6529482 100644
--- a/web/src/pages/ProductsPage.tsx
+++ b/web/src/pages/ProductsPage.tsx
@@ -24,57 +24,63 @@ export const ProductsPage: React.FC = () => {
 
     setForm(emptyProduct);
     setEditingId(null);
   };
 
   const startEdit = (product: Product) => {
     setEditingId(product.id);
     setForm({ name: product.name, price: product.price, stock: product.stock });
   };
 
   const cancelEdit = () => {
     setEditingId(null);
     setForm(emptyProduct);
   };
 
   const changeStockValue = (productId: string, value: number) => {
     const safeValue = Number.isNaN(value) ? 0 : value;
     setStockEdits((prev) => ({ ...prev, [productId]: Math.max(0, safeValue) }));
   };
 
   const adjustStock = (productId: string, currentStock: number, delta: number) => {
     const nextValue = (stockEdits[productId] ?? currentStock) + delta;
     changeStockValue(productId, nextValue);
   };
 
-  const saveStock = (productId: string, currentStock: number) => {
-    const newValue = stockEdits[productId];
-    if (newValue === undefined || newValue === currentStock) return;
-    updateProduct(productId, { stock: newValue });
+  const saveStock = (product: Product) => {
+    const newValue = stockEdits[product.id];
+    if (newValue === undefined || newValue === product.stock) return;
+
+    const confirmed = window.confirm(
+      `¿Confirmas actualizar el stock de ${product.name} de ${product.stock} a ${newValue}?`,
+    );
+    if (!confirmed) return;
+
+    updateProduct(product.id, { stock: newValue });
     setStockEdits((prev) => {
       const updated = { ...prev };
-      delete updated[productId];
+      delete updated[product.id];
       return updated;
     });
   };
 
   return (
     <div className="space-y-4">
       <div className="card p-6">
         <div className="flex items-center justify-between mb-4">
           <h2 className="text-xl font-semibold">{editingId ? 'Editar producto' : 'Nuevo producto'}</h2>
           {editingId && (
             <button onClick={cancelEdit} className="text-sm text-accent underline">
               Cancelar edición
             </button>
           )}
         </div>
         <form onSubmit={handleSubmit} className="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
           <label className="flex flex-col gap-1 text-sm font-medium">
             Nombre
             <input
               className="border border-cream rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-mint"
               value={form.name}
               onChange={(e) => setForm((prev) => ({ ...prev, name: e.target.value }))}
               required
             />
           </label>
@@ -140,54 +146,51 @@ export const ProductsPage: React.FC = () => {
                         >
                           {product.stock} uds
                         </span>
                         <div className="flex items-center gap-1">
                           <button
                             onClick={() => adjustStock(product.id, product.stock, -1)}
                             className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
                             aria-label="Disminuir stock"
                           >
                             -
                           </button>
                           <input
                             type="number"
                             min={0}
                             className="w-20 border border-cream rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-mint"
                             value={editedStock}
                             onChange={(e) => changeStockValue(product.id, Number(e.target.value))}
                           />
                           <button
                             onClick={() => adjustStock(product.id, product.stock, 1)}
                             className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
                             aria-label="Aumentar stock"
                           >
                             +
                           </button>
-                          <button
-                            onClick={() => saveStock(product.id, product.stock)}
-                            className="btn-primary px-3 py-2 text-xs"
-                          >
+                          <button onClick={() => saveStock(product)} className="btn-primary px-3 py-2 text-xs">
                             Actualizar
                           </button>
                         </div>
                       </div>
                     </td>
                     <td className="py-3">
                       <div className="flex gap-2">
                         <button
                           onClick={() => startEdit(product)}
                           className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
                           aria-label="Editar"
                         >
                           <PencilSquareIcon className="h-5 w-5" />
                         </button>
                         <button
                           onClick={() => deleteProduct(product.id)}
                           className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
                           aria-label="Eliminar"
                         >
                           <TrashIcon className="h-5 w-5" />
                         </button>
                       </div>
                     </td>
                   </tr>
                 );
diff --git a/web/src/pages/SalesPage.tsx b/web/src/pages/SalesPage.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..cb5a5ee6e48b9714d7cc7e16fec4c78af14cbe7d
--- /dev/null
+++ b/web/src/pages/SalesPage.tsx
@@ -0,0 +1,82 @@
+import React, { useMemo, useState } from 'react';
+import { ChevronDownIcon, EyeIcon } from '@heroicons/react/24/outline';
+import { usePos } from '../context/PosContext';
+
+export const SalesPage: React.FC = () => {
+  const { sales } = usePos();
+  const [expandedSaleId, setExpandedSaleId] = useState<string | null>(null);
+
+  const sortedSales = useMemo(
+    () => [...sales].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()),
+    [sales],
+  );
+
+  const toggleExpanded = (saleId: string) => {
+    setExpandedSaleId((current) => (current === saleId ? null : saleId));
+  };
+
+  const formatDate = (isoDate: string) => {
+    const date = new Date(isoDate);
+    return `${date.toLocaleDateString()} ${date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
+  };
+
+  return (
+    <div className="card p-6 space-y-4">
+      <div className="flex items-center justify-between">
+        <div>
+          <h2 className="text-xl font-semibold">Historial de ventas</h2>
+          <p className="text-sm text-coffee/70">Ventas registradas en el punto de venta</p>
+        </div>
+        <span className="text-sm text-coffee/70">{sales.length} ventas</span>
+      </div>
+
+      {!sortedSales.length && <p className="text-sm text-coffee/70">Aún no hay ventas registradas.</p>}
+
+      <div className="space-y-3">
+        {sortedSales.map((sale) => {
+          const isExpanded = expandedSaleId === sale.id;
+          return (
+            <div key={sale.id} className="border border-cream rounded-lg p-4 bg-white shadow-sm">
+              <div className="flex items-center justify-between gap-4">
+                <div className="space-y-1">
+                  <p className="text-sm text-coffee/70">{formatDate(sale.date)}</p>
+                  <p className="font-semibold text-lg">Total: ${sale.total.toFixed(2)}</p>
+                  <p className="text-xs text-coffee/70">{sale.items.length} productos</p>
+                </div>
+                <button
+                  onClick={() => toggleExpanded(sale.id)}
+                  className="flex items-center gap-2 px-3 py-2 rounded-lg bg-cream text-coffee hover:bg-blush/40"
+                >
+                  <EyeIcon className="h-5 w-5" />
+                  {isExpanded ? 'Ocultar detalle' : 'Ver detalle'}
+                  <ChevronDownIcon className={`h-4 w-4 transition ${isExpanded ? 'rotate-180' : ''}`} />
+                </button>
+              </div>
+
+              {isExpanded && (
+                <div className="mt-4 border-t border-cream pt-3">
+                  <div className="grid grid-cols-1 md:grid-cols-4 text-xs text-coffee/70 font-semibold pb-2">
+                    <span>Producto</span>
+                    <span className="md:text-center">Cantidad</span>
+                    <span className="md:text-right">Precio unitario</span>
+                    <span className="md:text-right">Subtotal</span>
+                  </div>
+                  <div className="divide-y divide-cream text-sm">
+                    {sale.items.map((item) => (
+                      <div key={item.productId} className="grid grid-cols-1 md:grid-cols-4 py-2">
+                        <span className="font-medium">{item.name}</span>
+                        <span className="md:text-center">{item.quantity}</span>
+                        <span className="md:text-right">${item.price.toFixed(2)}</span>
+                        <span className="md:text-right">${(item.price * item.quantity).toFixed(2)}</span>
+                      </div>
+                    ))}
+                  </div>
+                </div>
+              )}
+            </div>
+          );
+        })}
+      </div>
+    </div>
+  );
+};
 
EOF
)
