 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/web/src/pages/DashboardPage.tsx b/web/src/pages/DashboardPage.tsx
index 4cc6f294329b5e9b93fe538f7b0540389175cb83..1a434a7a88a8340776d33f7dd461184d8fff6008 100644
--- a/web/src/pages/DashboardPage.tsx
+++ b/web/src/pages/DashboardPage.tsx
@@ -1,55 +1,81 @@
 import React, { useMemo } from 'react';
 import { usePos } from '../context/PosContext';
 
 export const DashboardPage: React.FC = () => {
   const { products, sales } = usePos();
 
-  const { salesToday, totalToday, lowStock } = useMemo(() => {
+  const { salesToday, totalToday, lowStock, todaySales } = useMemo(() => {
     const today = new Date().toLocaleDateString();
     const todaySales = sales.filter((sale) => new Date(sale.date).toLocaleDateString() === today);
     const total = todaySales.reduce((acc, sale) => acc + sale.total, 0);
     const low = products.filter((p) => p.stock <= 5);
-    return { salesToday: todaySales.length, totalToday: total, lowStock: low };
+    return { salesToday: todaySales.length, totalToday: total, lowStock: low, todaySales };
   }, [products, sales]);
 
   return (
     <div className="grid grid-cols-1 lg:grid-cols-3 gap-4">
       <div className="card p-6">
         <p className="text-sm text-coffee/70">Ventas del día</p>
         <p className="text-3xl font-bold">{salesToday}</p>
         <p className="text-xs text-coffee/60 mt-1">Movimientos registrados</p>
       </div>
 
       <div className="card p-6">
         <p className="text-sm text-coffee/70">Total vendido</p>
         <p className="text-3xl font-bold">${totalToday.toFixed(2)}</p>
         <p className="text-xs text-coffee/60 mt-1">Suma de ventas del día</p>
       </div>
 
       <div className="card p-6">
         <p className="text-sm text-coffee/70">Stock bajo</p>
         <p className="text-3xl font-bold">{lowStock.length}</p>
         <p className="text-xs text-coffee/60 mt-1">Productos con 5 unidades o menos</p>
       </div>
 
       <div className="lg:col-span-3 card p-6">
         <h3 className="text-lg font-semibold mb-3">Alertas de stock</h3>
         <div className="space-y-2">
           {lowStock.map((product) => (
             <div
               key={product.id}
               className="flex items-center justify-between bg-cream/70 border border-cream rounded-lg px-4 py-3"
             >
               <div>
                 <p className="font-semibold">{product.name}</p>
                 <p className="text-xs text-coffee/70">Existencias: {product.stock}</p>
               </div>
               <span className="text-sm font-medium text-accent">Revisar</span>
             </div>
           ))}
           {!lowStock.length && <p className="text-sm text-coffee/70">Todo el stock está saludable.</p>}
         </div>
       </div>
+
+      <div className="lg:col-span-3 card p-6">
+        <h3 className="text-lg font-semibold mb-3">Ventas registradas hoy</h3>
+        <div className="space-y-2">
+          {todaySales.map((sale) => {
+            const saleDate = new Date(sale.date);
+            const time = saleDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
+            const itemsCount = sale.items.reduce((acc, item) => acc + item.quantity, 0);
+            return (
+              <div
+                key={sale.id}
+                className="flex items-center justify-between bg-cream/70 border border-cream rounded-lg px-4 py-3"
+              >
+                <div>
+                  <p className="font-semibold">{time}</p>
+                  <p className="text-xs text-coffee/70">{itemsCount} artículos vendidos</p>
+                </div>
+                <span className="text-sm font-semibold">${sale.total.toFixed(2)}</span>
+              </div>
+            );
+          })}
+          {!todaySales.length && (
+            <p className="text-sm text-coffee/70">Aún no registras ventas en el día.</p>
+          )}
+        </div>
+      </div>
     </div>
   );
 };
diff --git a/web/src/pages/PosPage.tsx b/web/src/pages/PosPage.tsx
index 9ea7b62c190c83de2ada71d72b097e9aaef41230..e43d2b2e2bd2c4da8d9266e645c2523ce8e97249 100644
--- a/web/src/pages/PosPage.tsx
+++ b/web/src/pages/PosPage.tsx
@@ -1,130 +1,187 @@
 import React, { useMemo, useState } from 'react';
 import { PlusIcon, MinusIcon, CheckCircleIcon } from '@heroicons/react/24/solid';
 import { usePos } from '../context/PosContext';
 
 type CartItem = { productId: string; quantity: number };
 
+type AlertState = { type: 'success' | 'error'; text: string } | null;
+
 export const PosPage: React.FC = () => {
   const { products, recordSale } = usePos();
   const [cart, setCart] = useState<CartItem[]>([]);
-  const [message, setMessage] = useState<string>('');
+  const [alert, setAlert] = useState<AlertState>(null);
+
+  const showAlert = (nextAlert: AlertState, duration = 2200) => {
+    setAlert(nextAlert);
+    if (nextAlert) {
+      setTimeout(() => setAlert(null), duration);
+    }
+  };
 
   const addToCart = (productId: string) => {
+    const product = products.find((p) => p.id === productId);
+    if (!product || product.stock === 0) {
+      showAlert({ type: 'error', text: 'Sin stock disponible para este producto' });
+      return;
+    }
+
     setCart((prev) => {
       const existing = prev.find((item) => item.productId === productId);
       if (existing) {
+        if (existing.quantity >= product.stock) {
+          showAlert({ type: 'error', text: 'No puedes superar el stock disponible' });
+          return prev;
+        }
         return prev.map((item) =>
-          item.productId === productId ? { ...item, quantity: item.quantity + 1 } : item,
+          item.productId === productId ? { ...item, quantity: Math.min(item.quantity + 1, product.stock) } : item,
         );
       }
       return [...prev, { productId, quantity: 1 }];
     });
   };
 
   const updateQuantity = (productId: string, quantity: number) => {
+    const product = products.find((p) => p.id === productId);
+    const maxQuantity = product ? product.stock : quantity;
     if (quantity <= 0) {
       setCart((prev) => prev.filter((item) => item.productId !== productId));
     } else {
-      setCart((prev) => prev.map((item) => (item.productId === productId ? { ...item, quantity } : item)));
+      setCart((prev) =>
+        prev.map((item) =>
+          item.productId === productId
+            ? { ...item, quantity: Math.min(quantity, maxQuantity) }
+            : item,
+        ),
+      );
     }
   };
 
   const cartItems = useMemo(() => {
     return cart
       .map((item) => {
         const product = products.find((p) => p.id === item.productId);
         if (!product) return null;
         const cappedQty = Math.min(item.quantity, product.stock);
+        if (cappedQty <= 0) return null;
         return {
           ...item,
           name: product.name,
           price: product.price,
           stock: product.stock,
           quantity: cappedQty,
           subtotal: cappedQty * product.price,
         };
       })
       .filter(Boolean) as Array<{
       productId: string;
       quantity: number;
       name: string;
       price: number;
       stock: number;
       subtotal: number;
     }>;
   }, [cart, products]);
 
   const total = cartItems.reduce((acc, item) => acc + item.subtotal, 0);
 
   const confirmSale = () => {
-    const filteredCart = cart.filter((item) => item.quantity > 0);
-    const result = recordSale(filteredCart);
+    if (!cartItems.length) {
+      showAlert({ type: 'error', text: 'Agrega productos al carrito antes de confirmar' });
+      return;
+    }
+
+    const stockIssues = cartItems.find((item) => item.quantity > item.stock || item.stock === 0);
+    if (stockIssues) {
+      showAlert({ type: 'error', text: `Stock insuficiente para ${stockIssues.name}` });
+      return;
+    }
+
+    const payload = cartItems.map(({ productId, quantity }) => ({ productId, quantity }));
+    const result = recordSale(payload);
     if (result.success) {
-      setMessage('Venta registrada correctamente');
+      showAlert({ type: 'success', text: 'Venta registrada correctamente' });
       setCart([]);
-      setTimeout(() => setMessage(''), 2000);
     } else {
-      setMessage(result.message ?? 'No se pudo registrar la venta');
-      setTimeout(() => setMessage(''), 2500);
+      showAlert({ type: 'error', text: result.message ?? 'No se pudo registrar la venta' }, 2500);
     }
   };
 
   return (
     <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 h-full">
       <div className="lg:col-span-2 card p-6 flex flex-col">
         <div className="flex items-center justify-between mb-4">
           <h2 className="text-xl font-semibold">Productos disponibles</h2>
           <span className="text-sm text-coffee/70">{products.length} en total</span>
         </div>
         <div className="grid md:grid-cols-2 xl:grid-cols-3 gap-4 overflow-y-auto">
-          {products.map((product) => (
-            <div key={product.id} className="card p-4 border border-cream">
-              <div className="flex items-start justify-between">
-                <div>
-                  <p className="font-semibold">{product.name}</p>
-                  <p className="text-sm text-coffee/70">Stock: {product.stock}</p>
+          {products.map((product) => {
+            const lowStock = product.stock <= 5;
+            return (
+              <div
+                key={product.id}
+                className={`card p-4 border border-cream ${lowStock ? 'ring-1 ring-blush/60' : ''}`}
+              >
+                <div className="flex items-start justify-between gap-2">
+                  <div className="space-y-1">
+                    <p className="font-semibold">{product.name}</p>
+                    <span
+                      className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${
+                        lowStock ? 'bg-blush/50 text-coffee' : 'bg-cream text-coffee/70'
+                      }`}
+                    >
+                      Stock: {product.stock}
+                    </span>
+                  </div>
+                  <span className="font-semibold text-right">${product.price.toFixed(2)}</span>
                 </div>
-                <span className="font-semibold">${product.price.toFixed(2)}</span>
+                <button
+                  onClick={() => addToCart(product.id)}
+                  className="btn-primary w-full mt-4 flex items-center justify-center gap-2"
+                  disabled={product.stock === 0}
+                >
+                  <PlusIcon className="h-4 w-4" /> Agregar
+                </button>
               </div>
-              <button
-                onClick={() => addToCart(product.id)}
-                className="btn-primary w-full mt-4 flex items-center justify-center gap-2"
-                disabled={product.stock === 0}
-              >
-                <PlusIcon className="h-4 w-4" /> Agregar
-              </button>
-            </div>
-          ))}
+            );
+          })}
           {!products.length && <p className="text-coffee/70">Crea productos para comenzar.</p>}
         </div>
       </div>
 
       <div className="card p-6 flex flex-col gap-4 h-full">
         <div className="flex items-center justify-between">
           <h2 className="text-xl font-semibold">Carrito</h2>
-          {message && <span className="text-sm text-accent">{message}</span>}
+          {alert && (
+            <span
+              className={`text-sm px-3 py-1 rounded-full ${
+                alert.type === 'success' ? 'bg-mint/20 text-accent' : 'bg-blush/40 text-coffee'
+              }`}
+            >
+              {alert.text}
+            </span>
+          )}
         </div>
 
         <div className="space-y-3 flex-1 overflow-y-auto pr-1">
           {cartItems.map((item) => (
             <div key={item.productId} className="border border-cream rounded-lg p-3 flex items-center justify-between">
               <div>
                 <p className="font-semibold">{item.name}</p>
                 <p className="text-xs text-coffee/70">Stock: {item.stock}</p>
                 <p className="text-sm font-medium mt-1">${item.subtotal.toFixed(2)}</p>
               </div>
               <div className="flex items-center gap-2">
                 <button
                   className="p-2 rounded-lg bg-cream hover:bg-blush/50"
                   onClick={() => updateQuantity(item.productId, item.quantity - 1)}
                   aria-label="Disminuir"
                 >
                   <MinusIcon className="h-4 w-4" />
                 </button>
                 <span className="w-8 text-center font-semibold">{item.quantity}</span>
                 <button
                   className="p-2 rounded-lg bg-cream hover:bg-blush/50"
                   onClick={() => updateQuantity(item.productId, Math.min(item.quantity + 1, item.stock))}
                   aria-label="Aumentar"
                   disabled={item.quantity >= item.stock}
                 >
diff --git a/web/src/pages/ProductsPage.tsx b/web/src/pages/ProductsPage.tsx
index 65e4c2a449762821ef4418bdbe8e5eb5ce663388..98c85b51cb862ff8cdf356f06c71afa029f98596 100644
--- a/web/src/pages/ProductsPage.tsx
+++ b/web/src/pages/ProductsPage.tsx
@@ -1,62 +1,84 @@
 import React, { useMemo, useState } from 'react';
 import { PencilSquareIcon, TrashIcon } from '@heroicons/react/24/outline';
 import { usePos, Product } from '../context/PosContext';
 
 const emptyProduct = { name: '', price: 0, stock: 0 };
 
 export const ProductsPage: React.FC = () => {
   const { products, addProduct, updateProduct, deleteProduct } = usePos();
   const [form, setForm] = useState<Omit<Product, 'id'>>(emptyProduct);
   const [editingId, setEditingId] = useState<string | null>(null);
+  const [stockEdits, setStockEdits] = useState<Record<string, number>>({});
 
   const sortedProducts = useMemo(() => [...products].sort((a, b) => a.name.localeCompare(b.name)), [products]);
 
   const handleSubmit = (event: React.FormEvent) => {
     event.preventDefault();
     if (!form.name.trim()) return;
 
     if (editingId) {
       updateProduct(editingId, form);
     } else {
       addProduct({ ...form, price: Number(form.price), stock: Number(form.stock) });
     }
 
     setForm(emptyProduct);
     setEditingId(null);
   };
 
   const startEdit = (product: Product) => {
     setEditingId(product.id);
     setForm({ name: product.name, price: product.price, stock: product.stock });
   };
 
   const cancelEdit = () => {
     setEditingId(null);
     setForm(emptyProduct);
   };
 
+  const changeStockValue = (productId: string, value: number) => {
+    const safeValue = Number.isNaN(value) ? 0 : value;
+    setStockEdits((prev) => ({ ...prev, [productId]: Math.max(0, safeValue) }));
+  };
+
+  const adjustStock = (productId: string, currentStock: number, delta: number) => {
+    const nextValue = (stockEdits[productId] ?? currentStock) + delta;
+    changeStockValue(productId, nextValue);
+  };
+
+  const saveStock = (productId: string, currentStock: number) => {
+    const newValue = stockEdits[productId];
+    if (newValue === undefined || newValue === currentStock) return;
+    updateProduct(productId, { stock: newValue });
+    setStockEdits((prev) => {
+      const updated = { ...prev };
+      delete updated[productId];
+      return updated;
+    });
+  };
+
   return (
     <div className="space-y-4">
       <div className="card p-6">
         <div className="flex items-center justify-between mb-4">
           <h2 className="text-xl font-semibold">{editingId ? 'Editar producto' : 'Nuevo producto'}</h2>
           {editingId && (
             <button onClick={cancelEdit} className="text-sm text-accent underline">
               Cancelar edición
             </button>
           )}
         </div>
         <form onSubmit={handleSubmit} className="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
           <label className="flex flex-col gap-1 text-sm font-medium">
             Nombre
             <input
               className="border border-cream rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-mint"
               value={form.name}
               onChange={(e) => setForm((prev) => ({ ...prev, name: e.target.value }))}
               required
             />
           </label>
           <label className="flex flex-col gap-1 text-sm font-medium">
             Precio
             <input
               type="number"
@@ -80,64 +102,107 @@ export const ProductsPage: React.FC = () => {
               required
             />
           </label>
           <button type="submit" className="btn-primary h-fit">
             {editingId ? 'Guardar cambios' : 'Crear producto'}
           </button>
         </form>
       </div>
 
       <div className="card p-6">
         <div className="flex items-center justify-between mb-4">
           <h2 className="text-xl font-semibold">Inventario</h2>
           <span className="text-sm text-coffee/70">{products.length} productos</span>
         </div>
         <div className="overflow-x-auto">
           <table className="min-w-full text-sm">
             <thead>
               <tr className="text-left text-coffee/70">
                 <th className="pb-2">Nombre</th>
                 <th className="pb-2">Precio</th>
                 <th className="pb-2">Stock</th>
                 <th className="pb-2">Acciones</th>
               </tr>
             </thead>
             <tbody className="divide-y divide-cream">
-              {sortedProducts.map((product) => (
-                <tr key={product.id} className="hover:bg-cream/60">
-                  <td className="py-3 font-medium">{product.name}</td>
-                  <td className="py-3">${product.price.toFixed(2)}</td>
-                  <td className="py-3">{product.stock}</td>
-                  <td className="py-3">
-                    <div className="flex gap-2">
-                      <button
-                        onClick={() => startEdit(product)}
-                        className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
-                        aria-label="Editar"
-                      >
-                        <PencilSquareIcon className="h-5 w-5" />
-                      </button>
-                      <button
-                        onClick={() => deleteProduct(product.id)}
-                        className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
-                        aria-label="Eliminar"
-                      >
-                        <TrashIcon className="h-5 w-5" />
-                      </button>
-                    </div>
-                  </td>
-                </tr>
-              ))}
+              {sortedProducts.map((product) => {
+                const lowStock = product.stock <= 5;
+                const editedStock = stockEdits[product.id] ?? product.stock;
+                return (
+                  <tr key={product.id} className={`hover:bg-cream/60 ${lowStock ? 'bg-blush/10' : ''}`}>
+                    <td className="py-3 font-medium">{product.name}</td>
+                    <td className="py-3">${product.price.toFixed(2)}</td>
+                    <td className="py-3">
+                      <div className="flex items-center gap-3 flex-wrap">
+                        <span
+                          className={`px-2 py-1 rounded-full text-xs font-semibold ${
+                            lowStock ? 'bg-blush/50 text-coffee' : 'bg-cream text-coffee/80'
+                          }`}
+                        >
+                          {product.stock} uds
+                        </span>
+                        <div className="flex items-center gap-1">
+                          <button
+                            onClick={() => adjustStock(product.id, product.stock, -1)}
+                            className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
+                            aria-label="Disminuir stock"
+                          >
+                            -
+                          </button>
+                          <input
+                            type="number"
+                            min={0}
+                            className="w-20 border border-cream rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-mint"
+                            value={editedStock}
+                            onChange={(e) => changeStockValue(product.id, Number(e.target.value))}
+                          />
+                          <button
+                            onClick={() => adjustStock(product.id, product.stock, 1)}
+                            className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
+                            aria-label="Aumentar stock"
+                          >
+                            +
+                          </button>
+                          <button
+                            onClick={() => saveStock(product.id, product.stock)}
+                            className="btn-primary px-3 py-2 text-xs"
+                          >
+                            Actualizar
+                          </button>
+                        </div>
+                      </div>
+                    </td>
+                    <td className="py-3">
+                      <div className="flex gap-2">
+                        <button
+                          onClick={() => startEdit(product)}
+                          className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
+                          aria-label="Editar"
+                        >
+                          <PencilSquareIcon className="h-5 w-5" />
+                        </button>
+                        <button
+                          onClick={() => deleteProduct(product.id)}
+                          className="p-2 rounded-lg bg-cream text-coffee hover:bg-blush/50"
+                          aria-label="Eliminar"
+                        >
+                          <TrashIcon className="h-5 w-5" />
+                        </button>
+                      </div>
+                    </td>
+                  </tr>
+                );
+              })}
               {!sortedProducts.length && (
                 <tr>
                   <td colSpan={4} className="py-6 text-center text-coffee/70">
                     Aún no hay productos.
                   </td>
                 </tr>
               )}
             </tbody>
           </table>
         </div>
       </div>
     </div>
   );
 };
 
EOF
)
